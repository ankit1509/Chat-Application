(this.webpackJsonpchat_application=this.webpackJsonpchat_application||[]).push([[0],{114:function(e,t,a){},123:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(24),n=a.n(c),r=a(10),i=a(12),l=a(21),o=(a(114),a(3)),j=function(e){var t,a=e.message;return(null===a||void 0===a||null===(t=a.attachments)||void 0===t?void 0:t.length)>0?Object(o.jsx)("img",{src:a.attachments[0].file,alt:"message-attachment",className:"message-image",style:{float:"right"}}):Object(o.jsx)("div",{className:"message",style:{float:"right",marginRight:"18px",color:"white",backgroundColor:"#3B2A50"},children:a.text})},u=function(e){var t,a,s=e.lastMessage,c=e.message,n=!s||s.sender.username!==c.sender.username;return Object(o.jsxs)("div",{className:"message-row",children:[n&&Object(o.jsx)("div",{className:"message-avatar",style:{backgroundImage:"url(".concat(null===c||void 0===c||null===(t=c.sender)||void 0===t?void 0:t.avatar,")")}}),(null===c||void 0===c||null===(a=c.attachments)||void 0===a?void 0:a.length)>0?Object(o.jsx)("img",{src:c.attachments[0].file,alt:"message-attachment",className:"message-image",style:{marginLeft:n?"4px":"48px"}}):Object(o.jsx)("div",{className:"message",style:{marginLeft:n?"4px":"48px",float:"left",backgroundColor:"#CABCDC"},children:c.text})]})},b=a(246),d=a(247),m=function(e){var t=Object(s.useState)(""),a=Object(i.a)(t,2),c=a[0],n=a[1],r=e.chatId,j=e.creds,u=function(e){e.preventDefault();var t=c.trim();t.length>0?Object(l.r)(j,r,{text:t}):alert("Message can not to blank"),n("")};return Object(o.jsxs)("form",{className:"message-form",onSubmit:u,children:[Object(o.jsx)("input",{className:"message-input",placeholder:"Send a message ... ",value:c,onChange:function(t){n(t.target.value),Object(l.n)(e,r)},onSubmit:u}),Object(o.jsx)("label",{htmlFor:"upload-button",children:Object(o.jsx)("span",{className:"image-button",children:Object(o.jsx)(b.a,{className:"picture-icon"})})}),Object(o.jsx)("input",{type:"file",multiple:!1,id:"upload-button",style:{display:"none"},onChange:function(e){e.preventDefault(),Object(l.r)(j,r,{files:e.target.files,text:""})}}),Object(o.jsx)("button",{type:"submit",className:"send-button",children:Object(o.jsx)(d.a,{className:"send-icon"})})]})},g=function(e){var t=e.chats,a=e.activeChat,s=e.userName,c=e.messages,n=t&&t[a],i=function(e,t){return n.people.map((function(a,s){return a.last_read===e.id&&Object(o.jsx)("div",{className:"read-receipt",style:{float:t?"right":"left",backgroundImage:a.person.avatar&&"url(".concat(a.person.avatar,")")}},"read_".concat(s))}))};return n?Object(o.jsxs)("div",{className:"chat-feed",children:[Object(o.jsxs)("div",{className:"chat-title-container",children:[Object(o.jsx)("div",{className:"chat-title",children:null===n||void 0===n?void 0:n.title}),Object(o.jsx)("div",{className:"chat-subtitle",children:n.people.map((function(e){return" ".concat(e.person.username)}))})]}),function(){var e=Object.keys(c);return e.map((function(t,a){var n=c[t],r=0===a?null:e[a-1],l=s===n.sender.username;return Object(o.jsxs)("div",{style:{width:"100%"},children:[Object(o.jsx)("div",{className:"message-block",children:l?Object(o.jsx)(j,{message:n}):Object(o.jsx)(u,{message:n,lastMessage:c[r]})}),Object(o.jsx)("div",{className:"read-receipts",style:{marginRight:l?"18px":"0px",marginLeft:l?"0px":"68px"},children:i(n,l)})]},"msg_".concat(a))}))}(),Object(o.jsx)("div",{style:{height:"100px"}}),Object(o.jsx)("div",{className:"message-form-container",children:Object(o.jsx)(m,Object(r.a)(Object(r.a)({},e),{},{chatId:a}))})]}):Object(o.jsx)("div",{})},h=a(41),p=a.n(h),x=a(63),O=a(7),v=a.n(O),f=a(8),N=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),r=Object(i.a)(n,2),l=r[0],j=r[1],u=Object(s.useState)(""),b=Object(i.a)(u,2),d=b[0],m=b[1],g=Object(s.useState)(""),h=Object(i.a)(g,2),O=h[0],N=h[1];Object(s.useEffect)((function(){if(O)return function(){f.a}}),[O]);var y=function(){var e=Object(x.a)(p.a.mark((function e(t){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={"Project-ID":"4fcca4fa-bb1b-4bee-a528-a61f5c13a6c4","User-Name":a,"User-Secret":l},e.prev=2,e.next=5,v.a.get("https://api.chatengine.io/chats",{headers:s});case 5:localStorage.setItem("username",a),localStorage.setItem("password",l),N(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),m("Oops, incorrect credentials, try again with correct credentials."),c(""),j("");case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return localStorage.getItem("username")?Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(f.a,{to:"/dashboard"})}):Object(o.jsx)("div",{className:"wrapper",children:Object(o.jsxs)("div",{className:"form",children:[Object(o.jsx)("h1",{className:"login-title",children:"Chat Application"}),Object(o.jsxs)("form",{onSubmit:y,children:[Object(o.jsx)("input",{type:"text",value:a,onChange:function(e){return c(e.target.value)},className:"login-input",placeholder:"Username",required:!0}),Object(o.jsx)("input",{type:"password",value:l,onChange:function(e){return j(e.target.value)},className:"login-input",placeholder:"Password",required:!0}),Object(o.jsx)("div",{align:"center",children:Object(o.jsx)("button",{type:"submit",className:"login-button",style:{backgroundColor:"#209cee"},children:Object(o.jsx)("span",{children:"Login"})})}),Object(o.jsx)("h2",{className:"login-error",children:d})]})]})})},y=(a(122),a(19)),S=a(248),C=a(25),k=(a(123),function(e){return Object(o.jsxs)(y.Navbar,{className:"notification is-dark m-0 p-1",style:{borderRadius:"0px"},children:[Object(o.jsxs)(y.Navbar.Brand,{children:[Object(o.jsx)(C.b,{className:"navbar-item",to:"/dashboard",style:{textDecoration:"none"},children:Object(o.jsx)("h2",{className:"has-text-primary title is-4 m-0",children:"Chat Application"})}),Object(o.jsx)(y.Navbar.Burger,{"data-target":"navigation",onClick:function(e){var t=document.querySelector("#"+e.target.dataset.target);e.target.classList.toggle("is-active"),t.classList.toggle("is-active")}})]}),Object(o.jsx)(y.Navbar.Menu,{id:"navigation",className:"notification is-dark p-0",children:Object(o.jsx)(y.Navbar.Container,{align:"right",children:Object(o.jsx)(y.Navbar.Item,{onClick:function(t){t.preventDefault(),localStorage.removeItem("username"),localStorage.removeItem("password"),e.setLogout(!1)},id:"logout",children:Object(o.jsx)(S.a,{title:"Log out",className:"m-0 mr-2 p-2"})})})})]})}),I=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(s.useEffect)((function(){if(!1===a)return function(){console.log("logout"),f.a}}),[a]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(C.a,{children:Object(o.jsxs)(f.d,{children:[Object(o.jsx)(f.b,{exact:!0,path:"/",children:Object(o.jsx)(N,{})}),Object(o.jsx)(f.b,{exact:!0,path:"/dashboard",render:function(){return localStorage.getItem("username")?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(k,{logout:a,setLogout:c}),Object(o.jsx)(l.d,{height:"92vh",projectID:"4fcca4fa-bb1b-4bee-a528-a61f5c13a6c4",userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password"),renderChatFeed:function(e){return Object(o.jsx)(g,Object(r.a)({},e))}})]}):Object(o.jsx)(f.a,{to:"/"})}})]})})})};n.a.render(Object(o.jsx)(I,{}),document.getElementById("root"))}},[[244,1,2]]]);
//# sourceMappingURL=main.260a2ee1.chunk.js.map